import{_ as e}from"./Table.vue_vue_type_script_lang-BwmIaq25.js";import{a1 as a,cd as t,a6 as l,bp as s,a2 as o,d as r,aa as i,r as n,N as u,a7 as c,b9 as d,a9 as p,o as m,c as g,aK as v,a as y,i as f,w as _,aL as j,C as b,ab as h,n as x,ac as S,aj as w,u as k,z as V,t as z,j as D,e as A,f as C,F as E,l as P,K as L,v as R}from"./index-D9UQcSFE.js";import{b as U,E as N,a as T}from"./el-dropdown-item-C-MClRcm.js";import"./el-popper-CI0yhH6M.js";import{E as B}from"./el-pagination-C9wpkp8F.js";import"./el-tag-kYKN7H0G.js";import"./el-select-Dv9vCEmJ.js";import{E as F,a as K}from"./el-checkbox-t7oy-lx0.js";import{E as $}from"./el-switch-B9n_0JFR.js";/* empty css                          */import{_ as q}from"./Dialog.vue_vue_type_style_index_0_lang-DeqRaDiv.js";import{d as I}from"./index-VJa0MK9d.js";import{_ as J}from"./AddProject.vue_vue_type_script_setup_true_lang-BQM1tfLP.js";import{u as O}from"./useIcon-Dp8bmm5Q.js";const H=a({size:{type:[Number,String],values:t,default:"",validator:e=>l(e)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:s},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:o(String),default:"cover"}}),M={error:e=>e instanceof Event},G=["src","alt","srcset"],Q=r({name:"ElAvatar"});const W=w(S(r({...Q,props:H,emits:M,setup(e,{emit:a}){const t=e,s=i("avatar"),o=n(!1),r=u((()=>{const{size:e,icon:a,shape:l}=t,o=[s.b()];return c(e)&&o.push(s.m(e)),a&&o.push(s.m("icon")),l&&o.push(s.m(l)),o})),S=u((()=>{const{size:e}=t;return l(e)?s.cssVarBlock({size:d(e)||""}):void 0})),w=u((()=>({objectFit:t.fit})));function k(e){o.value=!0,a("error",e)}return p((()=>t.src),(()=>o.value=!1)),(e,a)=>(m(),g("span",{class:x(y(r)),style:v(y(S))},[!e.src&&!e.srcSet||o.value?e.icon?(m(),f(y(b),{key:1},{default:_((()=>[(m(),f(j(e.icon)))])),_:1})):h(e.$slots,"default",{key:2}):(m(),g("img",{key:0,src:e.src,alt:e.alt,srcset:e.srcSet,style:v(y(w)),onError:k},null,44,G))],6))}}),[["__file","avatar.vue"]])),X={class:"flex cursor-pointer"},Y={class:"pr-16px"},Z={class:"name"},ee={class:"assets-info"},ae=r({__name:"ProjectList",props:{tableDataList:{type:Array,default:()=>[]},getProjectTag:{type:Function,required:!0},total:{type:Number,default:0},multipleSelection:{type:Boolean},selectedRows:{type:Array,default:()=>[]}},emits:["update:selectedRows"],setup(a,{emit:t}){const{t:l}=P(),{push:s}=k(),o=a,r=n(!1);let i="";const u=n(!1),c=()=>{u.value=!1},d=O({icon:"uil:edit"}),v=O({icon:"material-symbols:delete-outline"}),j=O({icon:"carbon:data-vis-1"}),b=e=>{"edit"==e.type?(async e=>{i=e,u.value=!0})(e.id):"del"==e.type?(e=>{const a=n(!1);L({title:"Delete",draggable:!0,message:()=>R("div",{style:{display:"flex",alignItems:"center"}},[R("p",{style:{margin:"0 10px 0 0"}},l("task.delAsset")),R($,{modelValue:a.value,"onUpdate:modelValue":e=>{a.value=e}})])}).then((async()=>{await I([e],a.value)}))})(e.id):le(e.id)},h=()=>{o.getProjectTag(x.value,S.value)},x=n(1),S=n(50),w=n(!1),H=n(!1),M=n(!1),G=t,Q=n([...o.selectedRows]);p(Q,(e=>{JSON.stringify(e)!==JSON.stringify(o.selectedRows)&&G("update:selectedRows",e),ae.value=e.length===o.tableDataList.length})),p((()=>o.selectedRows),(e=>{Q.value=[...e]})),p((()=>o.tableDataList),(e=>{ae.value=Q.value.length===e.length}));const ae=n(!1),te=()=>{ae.value?Q.value=o.tableDataList.map((e=>e.id)):Q.value=[]},le=e=>{s(`/project-management/project-detail?id=${e}`)};return(t,s)=>(m(),g(E,null,[a.multipleSelection?(m(),f(y(F),{key:0,modelValue:ae.value,"onUpdate:modelValue":s[0]||(s[0]=e=>ae.value=e),onChange:te},{default:_((()=>[V(z(y(l)("common.selectAll")),1)])),_:1},8,["modelValue"])):D("",!0),A(y(K),{modelValue:Q.value,"onUpdate:modelValue":s[1]||(s[1]=e=>Q.value=e)},{default:_((()=>[A(y(e),{columns:[],data:a.tableDataList,loading:r.value,"custom-content":"","card-wrap-style":{width:"210px",marginBottom:"20px",marginRight:"20px"}},{content:_((e=>[A(y(U),{trigger:"contextmenu",onCommand:b},{dropdown:_((()=>[A(y(N),null,{default:_((()=>[A(y(T),{icon:y(d),command:{type:"edit",id:e.id}},{default:_((()=>[V(z(y(l)("common.edit")),1)])),_:2},1032,["icon","command"]),A(y(T),{icon:y(v),command:{type:"del",id:e.id}},{default:_((()=>[V(z(y(l)("common.delete")),1)])),_:2},1032,["icon","command"]),A(y(T),{icon:y(j),command:{type:"aggregation",id:e.id}},{default:_((()=>[V(z(y(l)("project.aggregation")),1)])),_:2},1032,["icon","command"])])),_:2},1024)])),default:_((()=>[C("div",X,[a.multipleSelection?(m(),f(y(F),{key:0,value:e.id,class:"pr-16px"},null,8,["value"])):D("",!0),C("div",Y,[""!=e.logo?(m(),f(y(W),{key:0,src:e.logo,class:"avatar",fit:"cover"},null,8,["src"])):(m(),f(y(W),{key:1,class:"avatar avatar-placeholder"},{default:_((()=>[V(z(e.name.charAt(0)),1)])),_:2},1024))]),C("div",null,[C("div",Z,z(e.name),1),C("div",ee,z(y(l)("project.totalAssets"))+" : "+z(e.AssetCount),1)])])])),_:2},1024)])),_:1},8,["data","loading"])])),_:1},8,["modelValue"]),A(y(B),{"current-page":x.value,"onUpdate:currentPage":s[2]||(s[2]=e=>x.value=e),"page-size":S.value,"onUpdate:pageSize":s[3]||(s[3]=e=>S.value=e),"page-sizes":[50,70,100,200,400],small:w.value,disabled:M.value,background:H.value,layout:"total, sizes, prev, pager, next, jumper",total:a.total,onSizeChange:h,onCurrentChange:h},null,8,["current-page","page-size","small","disabled","background","total"]),A(y(q),{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=e=>u.value=e),title:y(l)("common.edit"),center:"",style:{"border-radius":"15px","box-shadow":"5px 5px 10px rgba(0, 0, 0, 0.3)"}},{default:_((()=>[A(J,{closeDialog:c,projectid:y(i),getProjectData:t.$props.getProjectTag,schedule:!1},null,8,["projectid","getProjectData"])])),_:1},8,["modelValue","title"])],64))}});export{ae as _};
