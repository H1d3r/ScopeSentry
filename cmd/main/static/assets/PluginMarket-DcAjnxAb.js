import{d as e,r as l,N as a,Q as t,o as n,c as i,e as o,w as u,f as s,a as d,z as r,t as p,A as c,U as f,F as g,S as m,G as v,R as b,j as y,ag as h,l as S,K as _,i as k,aK as x,ah as w,_ as C}from"./index-D9UQcSFE.js";import{E as V}from"./el-drawer-bw6GB9YA.js";import{a as U,E as P}from"./el-col-CXXou3fy.js";import{E as I}from"./el-tag-kYKN7H0G.js";import{E as j,b as L}from"./el-select-Dv9vCEmJ.js";import"./el-popper-CI0yhH6M.js";import{E as R}from"./el-card-DCo43hKN.js";import{E as A}from"./el-dialog-Dx-yfAYV.js";import{E as F,a as E}from"./el-radio-group-Bkh-faiF.js";/* empty css                        */import"./strings-CBvC00KA.js";import"./index-BOy3-hgS.js";import"./useInput-DYqoIpgX.js";import"./debounce-CgKOJkOb.js";import"./refs-wNcffJKd.js";const H={class:"flex flex-col gap-4"},M={class:"plugin-market-container"},T={class:"plugin-card-cover"},D={class:"plugin-card-content"},z={class:"plugin-info-item"},B={class:"label"},K={class:"value"},W={class:"plugin-info-item"},N={class:"label"},q={class:"value"},G={class:"plugin-info-item"},J={class:"label"},Q={class:"value"},$={class:"plugin-info-item introduction"},O={class:"label"},X={class:"value"},Y={class:"plugin-status"},Z={key:0,class:"empty-state"},ee={class:"flex flex-col gap-4"},le=C(e({__name:"PluginMarket",props:{visible:{type:Boolean},remotePluginList:{},marketLoading:{type:Boolean},onClose:{type:Function},onRefresh:{type:Function},onInstall:{type:Function}},setup(e){const C=e,{t:le}=S(),ae=l(""),te=l(""),ne=l(""),ie=l(""),oe=l(""),ue=[{label:"TargetHandler",value:"TargetHandler"},{label:"SubdomainScan",value:"SubdomainScan"},{label:"SubdomainSecurity",value:"SubdomainSecurity"},{label:"PortScanPreparation",value:"PortScanPreparation"},{label:"PortScan",value:"PortScan"},{label:"AssetMapping",value:"AssetMapping"},{label:"URLScan",value:"URLScan"},{label:"WebCrawler",value:"WebCrawler"},{label:"DirScan",value:"DirScan"},{label:"VulnerabilityScan",value:"VulnerabilityScan"},{label:"AssetHandle",value:"AssetHandle"},{label:"PortFingerprint",value:"PortFingerprint"},{label:"URLSecurity",value:"URLSecurity"},{label:"PassiveScan",value:"PassiveScan"}],se={TargetHandler:"linear-gradient(45deg, #ff9a9e 0%, #fad0c4 99%, #fad0c4 100%)",SubdomainScan:"linear-gradient(to top, #a18cd1 0%, #fbc2eb 100%)",SubdomainSecurity:"linear-gradient(to top, #fad0c4 0%, #fad0c4 1%, #ffd1ff 100%)",PortScanPreparation:"linear-gradient(to right, #ffecd2 0%, #fcb69f 100%)",PortScan:"linear-gradient(to right, #ff8177 0%, #ff867a 0%, #ff8c7f 21%, #f99185 52%, #cf556c 78%, #b12a5b 100%)",PortFingerprint:"linear-gradient(to top, #ff9a9e 0%, #fecfef 99%, #fecfef 100%)",AssetMapping:"linear-gradient(120deg, #f6d365 0%, #fda085 100%)",AssetHandle:"linear-gradient(to top, #fbc2eb 0%, #a6c1ee 100%)",URLScan:"linear-gradient(to top, #fdcbf1 0%, #fdcbf1 1%, #e6dee9 100%)",WebCrawler:"linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%)",URLSecurity:"linear-gradient(120deg, #d4fc79 0%, #96e6a1 100%)",DirScan:"linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%)",VulnerabilityScan:"linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%)",PassiveScan:"linear-gradient(to top, #e0c3fc 0%, #8ec5fc 100%)"},de=()=>{ae.value="",te.value="",ne.value="",ie.value="",oe.value=""},re=a((()=>{let e=C.remotePluginList;if(ae.value){const l=ae.value.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(l)||e.module.toLowerCase().includes(l)||e.introduction.toLowerCase().includes(l)||e.username.toLowerCase().includes(l)))}return te.value&&(e=e.filter((e=>e.module===te.value))),""!==ne.value&&("free"===ne.value?e=e.filter((e=>0===e.priceStatus)):"paid"===ne.value&&(e=e.filter((e=>0!==e.priceStatus)))),ie.value&&("installed"===ie.value?e=e.filter((e=>e.isInstalled&&!e.needUpdate)):"needUpdate"===ie.value?e=e.filter((e=>e.isInstalled&&e.needUpdate)):"notInstalled"===ie.value&&(e=e.filter((e=>!e.isInstalled)))),oe.value&&(e=e.filter((e=>(e.type||"scan")===oe.value))),e})),pe=l(!1),ce=l(""),fe=l(null),ge=e=>{0!==e.priceStatus?(fe.value=e,ce.value="",pe.value=!0):C.onInstall(e)},me=async()=>{ce.value.trim()?fe.value&&(pe.value=!1,await C.onInstall(fe.value,ce.value.trim()),ce.value="",fe.value=null):_.alert(le("plugin.tokenRequired"),le("common.reminder"),{type:"warning"})};return(e,l)=>{const a=t("loading");return n(),i(g,null,[o(d(V),{"model-value":e.visible,title:d(le)("plugin.market"),direction:"rtl",size:"90%","close-on-click-modal":!1,"onUpdate:modelValue":l[6]||(l[6]=l=>!l&&e.onClose())},{default:u((()=>[s("div",H,[o(d(U),{gutter:16,style:{"margin-bottom":"16px"}},{default:u((()=>[o(d(P),{span:24},{default:u((()=>[o(d(F),{modelValue:oe.value,"onUpdate:modelValue":l[0]||(l[0]=e=>oe.value=e),size:"default"},{default:u((()=>[o(d(E),{value:""},{default:u((()=>[r(p(d(le)("common.all")),1)])),_:1}),o(d(E),{value:"scan"},{default:u((()=>[r(p(d(le)("plugin.scanPlugin")),1)])),_:1}),o(d(E),{value:"server"},{default:u((()=>[r(p(d(le)("plugin.serverPlugin")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(d(U),{gutter:16},{default:u((()=>[o(d(P),{span:6},{default:u((()=>[o(d(c),{modelValue:ae.value,"onUpdate:modelValue":l[1]||(l[1]=e=>ae.value=e),placeholder:d(le)("common.inputText"),clearable:"",style:{height:"38px"}},{prefix:u((()=>[o(d(f),{icon:"iconoir:search"})])),_:1},8,["modelValue","placeholder"])])),_:1}),o(d(P),{span:4},{default:u((()=>[o(d(j),{modelValue:te.value,"onUpdate:modelValue":l[2]||(l[2]=e=>te.value=e),placeholder:d(le)("plugin.module"),clearable:"",style:{width:"100%",height:"38px"}},{default:u((()=>[(n(),i(g,null,m(ue,(e=>o(d(L),{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue","placeholder"])])),_:1}),o(d(P),{span:4},{default:u((()=>[o(d(j),{modelValue:ne.value,"onUpdate:modelValue":l[3]||(l[3]=e=>ne.value=e),placeholder:d(le)("plugin.priceStatus"),clearable:"",style:{width:"100%",height:"38px"}},{default:u((()=>[o(d(L),{label:d(le)("plugin.free"),value:"free"},null,8,["label"]),o(d(L),{label:d(le)("plugin.paid"),value:"paid"},null,8,["label"])])),_:1},8,["modelValue","placeholder"])])),_:1}),o(d(P),{span:4},{default:u((()=>[o(d(j),{modelValue:ie.value,"onUpdate:modelValue":l[4]||(l[4]=e=>ie.value=e),placeholder:d(le)("plugin.installStatus"),clearable:"",style:{width:"100%",height:"38px"}},{default:u((()=>[o(d(L),{label:d(le)("plugin.notInstalled"),value:"notInstalled"},null,8,["label"]),o(d(L),{label:d(le)("plugin.installed"),value:"installed"},null,8,["label"]),o(d(L),{label:d(le)("plugin.needUpdate"),value:"needUpdate"},null,8,["label"])])),_:1},8,["modelValue","placeholder"])])),_:1}),o(d(P),{span:3},{default:u((()=>[o(d(v),{type:"primary",onClick:e.onRefresh,loading:e.marketLoading},{default:u((()=>[r(p(d(le)("plugin.refresh")),1)])),_:1},8,["onClick","loading"])])),_:1}),o(d(P),{span:3},{default:u((()=>[o(d(v),{onClick:de},{default:u((()=>[r(p(d(le)("common.reset")),1)])),_:1})])),_:1})])),_:1}),b((n(),i("div",M,[o(d(U),{gutter:20},{default:u((()=>[(n(!0),i(g,null,m(re.value,(e=>(n(),k(d(P),{key:e.id,xs:24,sm:12,md:8,lg:6,xl:6},{default:u((()=>[o(d(R),{class:"plugin-market-card",style:{width:"100%",position:"relative",marginBottom:"20px",cursor:"pointer"},shadow:"hover","body-style":{padding:"0"},onClick:l=>(e=>{e.hash&&window.open(`https://plugin.scope-sentry.top/plugin/${e.hash}`,"_blank")})(e)},{default:u((()=>[s("div",T,[s("div",{style:x({height:"150px",background:se[e.module]||"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})},[s("div",{style:x({fontSize:"18px",fontWeight:"bold",color:"#333",textShadow:"1px 1px 3px rgba(0, 0, 0, 0.1)",letterSpacing:"0.5px",textAlign:"center"})},p(e.name),5),o(d(I),{type:0===e.priceStatus?"success":"danger",style:{position:"absolute",bottom:"8px",left:"8px"}},{default:u((()=>[r(p(0===e.priceStatus?d(le)("plugin.free"):d(le)("plugin.paid")),1)])),_:2},1032,["type"]),"server"!==e.type?(n(),k(d(I),{key:0,type:"info",style:{position:"absolute",bottom:"8px",right:"8px"}},{default:u((()=>{var l;return[r(p((null==(l=ue.find((l=>l.value===e.module)))?void 0:l.label)||d(le)("plugin.unknownModule")),1)]})),_:2},1024)):y("",!0)],4)]),s("div",D,[s("div",z,[s("span",B,p(d(le)("plugin.version"))+"：",1),s("span",K,p(e.version||"N/A"),1)]),s("div",W,[s("span",N,p(d(le)("plugin.author"))+"：",1),s("span",q,p(e.username),1)]),s("div",G,[s("span",J,p(d(le)("plugin.createTime"))+"：",1),s("span",Q,p(e.createTime),1)]),s("div",$,[s("span",O,p(d(le)("plugin.introduction"))+"：",1),s("span",X,p(e.introduction||d(le)("plugin.noIntroduction")),1)]),s("div",Y,[e.isInstalled&&e.needUpdate?(n(),k(d(I),{key:0,type:"warning",style:{"margin-bottom":"10px"}},{default:u((()=>[r(p(d(le)("plugin.needUpdate")),1)])),_:1})):e.isInstalled?(n(),k(d(I),{key:1,type:"success",style:{"margin-bottom":"10px"}},{default:u((()=>[r(p(d(le)("plugin.installed")),1)])),_:1})):(n(),k(d(I),{key:2,style:{"margin-bottom":"10px"}},{default:u((()=>[r(p(d(le)("plugin.notInstalled")),1)])),_:1}))]),s("div",{class:"plugin-actions",onClick:l[5]||(l[5]=w((()=>{}),["stop"]))},[e.isInstalled&&e.needUpdate?(n(),k(d(v),{key:0,type:"warning",style:{width:"100%"},onClick:l=>ge(e)},{default:u((()=>[r(p(d(le)("plugin.update")),1)])),_:2},1032,["onClick"])):e.isInstalled?(n(),k(d(v),{key:1,type:"info",disabled:"",style:{width:"100%"}},{default:u((()=>[r(p(d(le)("plugin.installed")),1)])),_:1})):(n(),k(d(v),{key:2,type:"primary",style:{width:"100%"},onClick:l=>ge(e)},{default:u((()=>[r(p(d(le)("plugin.install")),1)])),_:2},1032,["onClick"]))])])])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1}),0===re.value.length?(n(),i("div",Z,[s("p",null,p(d(le)("plugin.noPluginData")),1)])):y("",!0)])),[[a,e.marketLoading]])])])),_:1},8,["model-value","title"]),o(d(A),{modelValue:pe.value,"onUpdate:modelValue":l[9]||(l[9]=e=>pe.value=e),title:d(le)("plugin.token"),width:"400px","close-on-click-modal":!1},{footer:u((()=>[o(d(v),{onClick:l[8]||(l[8]=e=>pe.value=!1)},{default:u((()=>[r(p(d(le)("common.cancel")),1)])),_:1}),o(d(v),{type:"primary",onClick:me},{default:u((()=>[r(p(d(le)("common.ok")),1)])),_:1})])),default:u((()=>[s("div",ee,[o(d(c),{modelValue:ce.value,"onUpdate:modelValue":l[7]||(l[7]=e=>ce.value=e),placeholder:d(le)("plugin.tokenPlaceholder"),type:"password","show-password":"",onKeyup:h(me,["enter"])},null,8,["modelValue","placeholder"])])])),_:1},8,["modelValue","title"])],64)}}}),[["__scopeId","data-v-109f2c4a"]]);export{le as default};
